{"title":"如何给你的N个女朋友推送每日早安","uid":"ad154be3a95a533ac033c94b2b8f829a","slug":"22639","date":"2022-10-09T00:42:21.000Z","updated":"2022-10-22T08:17:51.335Z","comments":true,"path":"api/articles/22639.json","keywords":null,"cover":"https://static.iculture.cc/wp-content/uploads/2022/09/20220901113107110.png?x-oss-process=image/auto-orient,1/format,webp/watermark,image_cHVibGljL2xvZ28ucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLFBfMTA,x_10,y_10","content":"<span id=\"more\"></span>\n\n<h3 id=\"图文教程\"><a href=\"#图文教程\" class=\"headerlink\" title=\"图文教程\"></a>图文教程</h3><p>在我刚想构思这个教程怎么让不懂编程的朋友很快入门的时候，我考虑到：避免服务器搭建，避免定时任务，避免接触代码。在经历过各种思考后，觉得可以用 Github Actions 来白嫖，你如果有一个自己的服务器可以参考后面的运行代码。</p>\n<p>下面的文字可以按需修改</p>\n<p><img src=\"https://static.iculture.cc/wp-content/uploads/2022/09/20220901113107110.png?x-oss-process=image/auto-orient,1/format,webp/watermark,image_cHVibGljL2xvZ28ucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLFBfMTA,x_10,y_10\" alt=\"图片[1]-如何给你的N个女朋友推送每日早安-FancyPig&#39;s blog\">模板消息效果图</p>\n<h3 id=\"快捷入口\"><a href=\"#快捷入口\" class=\"headerlink\" title=\"快捷入口\"></a>快捷入口</h3><p><a href=\"https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login\">微信测试号入口</a><a href=\"https://www.iculture.cc/?golink=aHR0cHM6Ly9naXRodWIuY29tL3J4cncvZGFpbHlfbW9ybmluZw==\">Github项目入口</a></p>\n<p>点击上方的<strong>Github项目入口</strong>，按图点击 Fork，创建到自己的仓库下！</p>\n<p><img src=\"https://static.iculture.cc/wp-content/uploads/2022/09/20220901113443528-1024x89.png?x-oss-process=image/auto-orient,1/format,webp/watermark,image_cHVibGljL2xvZ28ucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLFBfMTA,x_10,y_10\" alt=\"图片[2]-如何给你的N个女朋友推送每日早安-FancyPig&#39;s blog\"></p>\n<p>然后点击<strong>微信测试号入口</strong>，进入申请好账户</p>\n<p>按下图，创建模板，设置变量，把微信公众平台上的各种字符串按说明创建到 GitHub -&gt; Settings -&gt; Secrets -&gt; Actions 中。</p>\n<p><img src=\"https://static.iculture.cc/wp-content/uploads/2022/09/20220901113518699-1024x775.png?x-oss-process=image/auto-orient,1/format,webp/watermark,image_cHVibGljL2xvZ28ucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLFBfMTA,x_10,y_10\" alt=\"图片[3]-如何给你的N个女朋友推送每日早安-FancyPig&#39;s blog\"></p>\n<p><img src=\"https://static.iculture.cc/wp-content/uploads/2022/09/20220901113529471-1024x744.png?x-oss-process=image/auto-orient,1/format,webp/watermark,image_cHVibGljL2xvZ28ucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLFBfMTA,x_10,y_10\" alt=\"图片[4]-如何给你的N个女朋友推送每日早安-FancyPig&#39;s blog\"></p>\n<p>然后回到Github上，点击Settings，点击New repository secret</p>\n<p><img src=\"https://static.iculture.cc/wp-content/uploads/2022/09/20220901113548877-1024x612.png?x-oss-process=image/auto-orient,1/format,webp/watermark,image_cHVibGljL2xvZ28ucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLFBfMTA,x_10,y_10\" alt=\"图片[5]-如何给你的N个女朋友推送每日早安-FancyPig&#39;s blog\"></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">字段名称</th>\n<th align=\"center\">字段含义</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">APP_ID</td>\n<td align=\"center\">公众平台 appID</td>\n</tr>\n<tr>\n<td align=\"center\">APP_SECRET</td>\n<td align=\"center\">公众平台 appSecret</td>\n</tr>\n<tr>\n<td align=\"center\">TEMPLATE_ID</td>\n<td align=\"center\">模板 ID</td>\n</tr>\n<tr>\n<td align=\"center\">USER_ID</td>\n<td align=\"center\">接收人的 OpenID 多个用换行分隔</td>\n</tr>\n<tr>\n<td align=\"center\">BIRTHDAY</td>\n<td align=\"center\">生日，格式：1999-11-04</td>\n</tr>\n<tr>\n<td align=\"center\">START_DATE</td>\n<td align=\"center\">日期，格式：2008-08-08</td>\n</tr>\n<tr>\n<td align=\"center\">CITY</td>\n<td align=\"center\">城市，格式：北京</td>\n</tr>\n</tbody></table>\n<p>启用自己项目下的 Action！</p>\n<p><img src=\"https://static.iculture.cc/wp-content/uploads/2022/09/20220901114558594-1024x416.png?x-oss-process=image/auto-orient,1/format,webp/watermark,image_cHVibGljL2xvZ28ucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLFBfMTA,x_10,y_10\" alt=\"图片[6]-如何给你的N个女朋友推送每日早安-FancyPig&#39;s blog\"></p>\n<p>如果运行出现错误，按以下方法可以看到错误，在这里 issue 提问也可以，在小红书群里问也可以</p>\n<p><img src=\"https://static.iculture.cc/wp-content/uploads/2022/09/20220901114618785-1024x568.png?x-oss-process=image/auto-orient,1/format,webp/watermark,image_cHVibGljL2xvZ28ucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLFBfMTA,x_10,y_10\" alt=\"图片[7]-如何给你的N个女朋友推送每日早安-FancyPig&#39;s blog\"></p>\n<p>启用后可以直接运行，看看女朋友的手机有没有收到推送吧！ 这个定时任务是每天早晨8点推送，如果会编程的同学可以自己自定义一些东西～</p>\n<p>图中的操作，除了各种英文字符串不一样，模板消息中的中文不一样，其他的应该都是一样的，不然程序跑不通的～</p>\n<p>Github 的右上角可以点击 star 给我点鼓励吧亲</p>\n<p>小红书&#x2F;抖音上点点关注，点点赞，有什么好玩的东西可以at我，我来教你们做</p>\n<p>ps. 有一些注意事项在此补充</p>\n<ol>\n<li>第一次登录微信公众平台测试号给的 app secret 是错误的，刷新一下页面即可</li>\n<li>生日的日期格式是：<code>05-20</code>，纪念日的格式是 <code>2022-08-09</code>，请注意区分。城市请写到地级市，比如：<code>北京</code>，<code>广州</code>，<code>承德</code></li>\n<li>变量中粘贴的各种英文字符串不要有空格，不要有换行，除了模板之外都没有换行</li>\n<li>Github Actions 的定时任务，在 workflow 的定义是 <code>0 0 * * *</code>，是 UTC 时间的零点，北京时间的八点。但是由于 Github 同一时间任务太多，因此会有延迟</li>\n<li>我会偶尔优化一下代码，emm 但现在我自己在做一个完整的平台项目，想让大家更加便捷地上手</li>\n</ol>\n<h2 id=\"代码使用\"><a href=\"#代码使用\" class=\"headerlink\" title=\"代码使用\"></a>代码使用</h2><p>如果你有一个<strong>自己的服务器</strong>，或是<strong>不会关机的电脑</strong>，可以通过如下方式使用代码。本项目使用Python3。</p>\n<p>注意：以下步骤面向具有一定编程基础的同学，需要了解git和Python的基本使用。如果你是纯小白，建议参考上面的教程通过Github Actions来使用本项目。如果仍想尝试通过代码方式运行，请先安装好git和Python3</p>\n<ol>\n<li>首先clone本仓库：</li>\n</ol>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">git clone https:&#x2F;&#x2F;github.com&#x2F;rxrw&#x2F;daily_morning.git</code></pre>\n\n<ol>\n<li>安装依赖：</li>\n</ol>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">cd daily_morning\n\n\n\npip3 install -r requirements.txt</code></pre>\n\n<ol>\n<li>根据示例完成配置文件<code>config.yaml</code>。 <code>app_id</code>、 <code>app_secret</code>、 <code>user_ids</code> 和 <code>template_id</code> 的配置可参考使用说明</li>\n<li>运行代码<code>timer.py</code>，即可实现每日定时发送：</li>\n</ol>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">python3 timer.py</code></pre>\n\n<p>附：当然，如果你有多个女朋友，你可以在微信公众平台上为她们设置不同的模板，并且为每个人分别建立一个配置文件，例如：<code>xiaomei.yaml</code> 和<code>xiaohong.yaml</code>（注意在配置时千万不要写错了<code>user_ids</code>）。然后同时运行两个服务：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">python3 timer.py --cfg xiaomei.yaml &amp;\n\n\n\npython3 timer.py --cfg xiaohong.yaml &amp;</code></pre>\n","feature":true,"text":" 图文教程在我刚想构思这个教程怎么让不懂编程的朋友很快入门的时候，我考虑到：避免服务器搭建，避免定时任务，避免接触代码。在经历过各种思考后，觉得可以用 Github Actions 来白嫖，你如果有一个自己的服务器可以参考后面的运行代码。 下面的文字可以按需修改 模板消息效果图 ...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"文章","slug":"文章","count":15,"path":"api/categories/文章.json"}],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B\"><span class=\"toc-text\">图文教程</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BF%AB%E6%8D%B7%E5%85%A5%E5%8F%A3\"><span class=\"toc-text\">快捷入口</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%A3%E7%A0%81%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">代码使用</span></a>","author":{"name":"AURR","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"国产剧 欢乐颂3","uid":"a1d39d94828c55b81b3145a1711bd69b","slug":"欢乐颂3","date":"2022-10-10T02:08:53.000Z","updated":"2022-10-23T08:50:59.406Z","comments":true,"path":"api/articles/欢乐颂3.json","keywords":null,"cover":"https://s2.loli.net/2022/10/23/Kr2ya53liCMJhGd.jpg","text":"免费...","link":"","photos":[],"count_time":{"symbolsCount":57,"symbolsTime":"1 mins."},"categories":[{"name":"影视","slug":"影视","count":30,"path":"api/categories/影视.json"}],"tags":[{"name":"电视剧","slug":"电视剧","count":14,"path":"api/tags/电视剧.json"}],"author":{"name":"AURR","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"王者荣耀改战区教程，有手就行快点学！","uid":"4eeda425a9df6bd08b23dc4eec0615e8","slug":"634","date":"2022-10-07T01:10:11.000Z","updated":"2022-10-22T08:15:43.682Z","comments":true,"path":"api/articles/634.json","keywords":null,"cover":"https://static.iculture.cc/wp-content/uploads/2021/04/2DE485C8D2421C8624C640E41DEF6CF3-768x626.jpg","text":"￥4.09元...","link":"","photos":[],"count_time":{"symbolsCount":265,"symbolsTime":"1 mins."},"categories":[{"name":"软件","slug":"软件","count":32,"path":"api/categories/软件.json"}],"tags":[{"name":"脚本","slug":"脚本","count":3,"path":"api/tags/脚本.json"}],"author":{"name":"AURR","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}